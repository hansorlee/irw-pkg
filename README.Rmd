---
output: github_document
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  out.width = "100%"
)
```

# irwpkg

`irwpkg` is an R package designed to facilitate easy access to datasets from the Item Response Warehouse ([IRW](https://datapages.github.io/irw/)), offering functions to download, explore, and analyze these datasets.

## Installation

You can install the development version of `irwpkg` from [GitHub](https://github.com/) with:

```{r}
#| eval: false
# install.packages("remotes")
remotes::install_github("hansorlee/irwpkg")
```

## Usage

To use `irwpkg`, load the package using:

```{r}
library(irwpkg)
```

### View list of datasets

The list_available_datasets() function provides a list of datasets in the IRW database, showing key metadata (dataset name, row count, and variable count).

```{r}
#| eval: false
# List available datasets
list_available_datasets()
```

### Fetch data

Once you have identified a dataset you want, you can use `fetch_data()` to load it as a data frame in R. For example, to fetch the `abortion` dataset, you can use:

```{r}
#| eval: false
# Fetch a dataset by name
df <- fetch_data(name="abortion")
dim(df)
head(df)
```

### Download data

```{r}
#| eval: false
table = fetch_table("abortion")
download_data(table, path = "abortion_data.csv")
```

### view DB/table metadata

```{r}
db_info = get_database_metadata()

table_info = get_table_metadata("abortion")
```

### filter tables by criteria

```{r}
filter_tables(
  n_rows = 10000, 
  required_columns = c("rater"), 
  min_unique_ids = 50, 
  min_unique_items = 10, 
  max_sparsity = 5
)

filter_tables(
  n_rows = 10000, 
  required_columns = c("rater"), 
  min_unique_ids = 50, 
  min_unique_items = 10, 
  max_sparsity = 10
)

```
